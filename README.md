# User Administration Guide

The Administratin Guide provides conceptual information about the GoalProfit product. This book defines terminology and includes implementation scenarios.

## Overview

The system is designed to automate the pricing process, which includes the formation of recommendations based on price rules, competitor prices, forecasts and elasticity.
The system is a comprehensive solution based on a microservice architecture that allows you to generate recommendations at regular prices with a speed close to online. 
The system is built on the basis of the ELT (Extract, Load, Transform) process, which includes:

* extracting data from external sources - extract;
* loading them into the data warehouse - load;
* transformation and cleanup to fit the needs of the business model - transform.

## Accessing GoalProfit platform

## Key Features


## Administration panel

* Config
* Streams
* Reports
* Sources
* Solutions
* Users
* Flow


## Navigating the interface

Basic interface - a web interface for users to work with the application. 
It is a set of pre-configured pages with static addresses and user-created pages. 
The root page for custom pages is the /pages page.
List of preconfigured pages:

* pages
* pages/config2
* admin
* users
* graphiQL

User-created pages are created blank by default. If, after creation, the content of the page is not edited, then it is not saved in the system.

## GraphiQL console
## Additional services

###### Combined file collection service
###### File upload service via Drag&Drop
###### Service for unloading data from the system

## Pricing module

The pricing module is used to calculate price recommendations based on price rules and established optimization principles.
Price rules can be formed in a special interface from basic rules. 
The module accepts json files as input with the combined entity and additional parameters that are generated by the Retail microservice, such as price zones.

It analyzes the intersecting rules and breaks the data into independent blocks, on which the optimization module performs a parallel calculation. At the output, the optimization module returns csv files.
The input and output files of the optimization module are stored in the /gp/retail/cache folder. The user interface shows the proposed price and optimization curves (if the latter has been added).

### Pricing rules

There are several types of price rules processed by the optimizer. Based on them, system administrators can create price rules that are available for users to add to scripts and create instances of price rules.
The rules include a common set of settings for all rules called \<header> and individual settings depending on the rule type.
All types of price rules have a common set of parameters listed below:
Common \<header> parameters used in rules:

* grouper: defines independent product groups within which the rule will work.
* filter: Filters the data for the rule, including the filter results.
* filter_not: Filters the data for the rule, discarding the filter results.
* id: id of the rule.
* name: the name of the rule.
* weight: weight of the rule for the optimizer. In the event of a conflict between non-strict rules, a price will be chosen such that the sum of the products of weight times the price deviation from the allowable price in the rule will be minimal for all non-strict rules.
* strict: Flag for the strictness of the rule.
* text: The text of the rule that the user will see. Customizable options are marked with curly braces.
* number: The sequence number of the rule. If there is a conflict between strict rules, the rule with the lower sequence number will take precedence.

> IMPORTANT!: If you enter {parameter name} in the text parameter, then the parameter becomes available for editing by the user in the interface.

### Types of optimization

#### Strong optimization
Strict optimization is another rule configured through the pricing module interface. You can assign weights to it and it can violate other rules (except strict ones). Convenient for setting various goals (revenue, number of sales, etc.) with setting weights for each goal.

#### Balanced Optimization
Balanced optimization works in the same way as strict optimization, but it cannot violate other rules, giving price recommendations only in the price range that does not violate any other rule.

###### Pricing module interface

## Forecast module

The forecasting module is used to predict various indicators: elasticity, demand (including seasonal demand), whether it is necessary to buy additional goods.
The output of the module can be used either for direct evaluation by the client or in an optimization process in the pricing module.
The module accepts historical data and a set of hyperparameters as input.
The general scheme of the module operation is presented below:

### Elasticity

Elasticity is calculated inside the optimization module at different levels: product, product line, brand, class, etc. This can be configured in the configuration file in /retail
The model automatically calculates the validity of each of these levels and combines them with the assigned weights for each level. The weights are entered manually or by a special hyperparameter selection module.

Custom hyperparameters:
* level of elasticity calculation - elasticity calculation level
* weights of each level - weight of each level
* elast_min, elast_max - elasticity value limits
* reest_horizon - number of days to reestimate simulation parameters to capture local trends
* reest_kernel - form of reestimation of modeling parameters: "triangle" (linear growth of the contribution of information from days, the closer to the present time, the stronger the influence) or "threshold" (the same contribution from all days). The angle of the right triangle is calculated automatically.
* min_basedemand - restrictions on the minimum demand, so as not to spoil the statistics with data when the product was not bought.

### Seasonality

This submodule calculates seasonal curves and holidays, detecting the latter automatically based on anomalies in the statistics. Floating holidays, such as Easter, are also taken into account if their deviation is within four weeks.

### Hyperparameter fitting module

The hyperparameter fitting module uses the engine tuning technology described below to fit or adjust a set of hyperparameters to calculate a category prediction.

#### Engine Tuning

The following input data are required for the selection of hyperparameters:
* Category for which the selection is made
* Dates on which the simulation is run
* Hyperparameters and their possible values

Due to the large volume of products in the category, modeling is performed on truncated data: a randomly selected 5% of products.
Engine tuning can be run in serial or parallel mode.

In sequential mode, the system runs the simulation in turn on the selected hyperparameters, taking into account the quality of optimization from previous runs. This makes it possible to find the optimal hyperparameter values in fewer iterations, but takes more time.
In parallel mode, the system starts the simulation on the entire range of hyperparameters at once, choosing the optimal one. It is faster, but requires more computing power.

After finding the optimum, an additional check is carried out: modeling is carried out on the entire category, if as a result of this the quality of the forecast has improved, then a new set of hyperparameters is written into the system.

## Configuration & Settings

To implement the price recommendation process in the system, you need to take the following steps:

* to process and transform data to present them in the structure necessary for the system
* upload data to the system
* customize user interfaces
* set up the main entity for the pricing interface
* customize pricing module interface
* set up price rules

Think about additional features (May be creating pages and some other objects)

### File upload

#### Data loading mechanisms

The system assumes several types of data loading.
Loading data into the system is implemented through file import
The following import methods are provided:
* Loading from the integration area on the server (implemented)
* Drag&drop in the front module of the system (under implementation)
* Api TBD (under implementation)
* TBD understand upload via ODBC and kafka

#### Data storage approach

The system stores all initial data, including historical and irrelevant cuts, to save the possibility of recalculating the results when changing calculation algorithms or models.

> IMPORTANT!:For the basic functionality (reports, scripts, config2) to work, all data must be linked to combined

#### Data Requirements
For uploaded files, there is an integration area on the server (directory ../inbox). It contains all integration files and directories.

> IMPORTANT!: When an uploaded file is deleted from the integration area, the data from this file will be deleted from the system.

#### Download Requirements

* The system supports any type of file that can be converted to a column format (csv, xls, xlsx, xlsm, etc.)
csv files must comply with the rfc4180 standard and be encoded in UTF-8.
* In decimal fractions, the separator must be a period.
* Dates must be in YYYY-MM-DD format
* Excel files should not have merged cells.
* The Excel file you upload must have only one table per sheet.
* When downloading large amounts of data, you can use GZIP to compress the downloaded file.
* When loading a new version of data for an already existing report, the location of the attributes must match the previously loaded files.

###### Configuring reports & pricing modules
###### Algorithm for creating new or editing existing reports
###### Setting up price rules

## Troubleshooting
## Auditing Events
## Best Practices & Common Questions

What is test server IP?



## Legal Notice

For information about legal notices, trademarks, disclaimers, warranties, export and other use restrictions, patent policy, and FIPS compliance, see .
